<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        body {
            width: 100%;
            overflow-x: hidden;
            overflow-y: hidden;
        }
        
        p {
            position: absolute;
        }
        
        .wrap {
            width: 100%;
            height: 70%;
            position: absolute;
            top: 30%;
        }
        
        .wrap ul {
            padding: 0px;
            margin: 0px;
            width: 100%;
            height: 100%;
            overflow: hidden;
            position: absolute;
        }
        
        .wrap ul li {
            list-style: none;
            width: 11.5%;
            height: 100%;
            margin-right: 1%;
            float: left;
            border-radius: 15px;
            transition: 0.2s;
        }

    </style>
    <script src="jquery-1.11.3.js"></script>
    <script>
        $(function() {

            var Acolor = ['#FF6F6C', '#FFB66E', '#FFDB74', '#E5F98D', '#90FAF7', '#8DA8EA', '#C0A2EA', '#2ED117'];
            var Aheight = ['63%', '47%', '67%', '47%', '27%', '47%', '61%', '50%'];
            var timer = null;
            for (var i = 0; i < $('.wrap ul li').length; i++) {
                $('.wrap ul li').eq(i).css('background', Acolor[i]);
                $('.wrap ul li').eq(i).css('transform', 'translateY(' + Aheight[i] + ')');
            }

            $('.wrap ul li').mousemove(function(ev) {

                clearTimeout(timer);
                var ev = ev || window.event;
                var X = ev.pageX;
                var str = '';

                for (var j = 0; j < $('.wrap ul li').length; j++) {
                    var Disx = X - ($('.wrap ul li').eq(j).offset().left + parseInt($('.wrap ul li').eq(j).outerWidth() / 2));
                    Disx = Math.abs(Disx);

                    if (Disx < parseInt($('.wrap ul li').eq(j).outerWidth()) * 6) {
                        var scale = Disx / parseInt($('.wrap').outerWidth());
                        str += scale + '||';
                        $('p').html(str);
                        var itop = scale * parseInt($('.wrap').outerHeight());
                        $('.wrap ul li').eq(j).css('transform', 'translateY(' + itop + 'px)');
                    }
                }
            })
            $('.wrap ul li').mouseout(function() {
                timer = setTimeout(function() {
                    for (var i = 0; i < $('.wrap ul li').length; i++) {
                        $('.wrap ul li').eq(i).css('transform', 'translateY(' + Aheight[i] + ')');
                    }
                }, 200)

            })
            var onff = true;
            $('.wrap ul').on('click', 'li', function() {
                if (onff) {
                    var ileft = $('.wrap ul li').eq($(this).index()).offset().left + parseInt($('.wrap ul li').eq($(this).index()).outerWidth()) / 2 - parseInt($('.wrap ul').outerWidth()) / 2;
                    $('.wrap ul').animate({

                        left: -ileft,
                    }, 500, function() {
                        $('.wrap').css({
                            'transform': 'scale(3)',
                            'top': '90%',
                        })
                    });

                    //alert($(this).index());
                    $('.wrap ul li').off();
                    onff = false;
                } else {

                    $('.wrap').css({
                        'transform': 'scale(1)',
                        'top': '30%',
                    })
                    $('.wrap ul').animate({
                        left: '0px'
                    }, 500)
                    onff = true;
                    $('.wrap ul li').mousemove(function(ev) {

                        clearTimeout(timer);
                        var ev = ev || window.event;
                        var X = ev.pageX;
                        var str = '';

                        for (var j = 0; j < $('.wrap ul li').length; j++) {
                            var Disx = X - ($('.wrap ul li').eq(j).offset().left + parseInt($('.wrap ul li').eq(j).outerWidth() / 2));
                            Disx = Math.abs(Disx);

                            if (Disx < parseInt($('.wrap ul li').eq(j).outerWidth()) * 6) {
                                var scale = Disx / parseInt($('.wrap').outerWidth());
                                str += scale + '||';
                                $('p').html(str);
                                var itop = scale * parseInt($('.wrap').outerHeight());
                                $('.wrap ul li').eq(j).css('transform', 'translateY(' + itop + 'px)');
                            }
                        }
                    })
                    $('.wrap ul li').mouseout(function() {
                        timer = setTimeout(function() {
                            for (var i = 0; i < $('.wrap ul li').length; i++) {
                                $('.wrap ul li').eq(i).css('transform', 'translateY(' + Aheight[i] + ')');
                            }
                        }, 200)

                    })
                }
            })
        })

    </script>
</head>

<body>
    <p></p>
    <div class="wrap">
        <ul>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
            <li></li>
        </ul>
    </div>
</body>

</html>
