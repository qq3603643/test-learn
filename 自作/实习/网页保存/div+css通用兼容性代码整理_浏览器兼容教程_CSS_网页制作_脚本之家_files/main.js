!function(){var n={advertLoad:[]},a=function(a,e,t,o,i,d){var r=function(e){var r=function(n,e,o,i,d,r){var c={appId:t,advertId:n,agencyType:e,pce:o,tag:i,ref:d};void 0!==r&&(c.rtbAdId=r),a.ajax({url:"http://e.changyan.sohu.com/dataService/v2/pv",dataType:"jsonp",data:c})},c=function(n,e,i,d,r,c,p,s,u){var y={appId:t,advertId:n,agencyType:e,pce:i,tag:d,ref:r,category:o};void 0!==c&&(y.rtbAdId=c),void 0!==p&&(y.dspId=p),void 0!==s&&(y.isCookieMapping=s),void 0!==u&&(y.type=u),a.ajax({url:"http://e.changyan.sohu.com/dataService/v2/click",dataType:"jsonp",data:y})},p={appId:t,category:o,title:i,url:d,position:e,uid:"",userAgent:window.navigator.userAgent};1607===p.position&&(p.isLeft=!0),1608===p.position&&(p.isLeft=!1,p.position=1607),window.changyan&&window.changyan.api&&"function"==typeof window.changyan.api.ready&&window.changyan.api.ready(function(n){var a=n.getUUID();"string"==typeof a&&32===a.length&&(p.uid=a)}),a.ajax({url:"http://e.changyan.sohu.com/dataService/v2/getData",data:p,dataType:"jsonp",success:function(e){if(0===e.code){var t={};"RTB"===e.agencyType&&(t=a.parseJSON(e.advertContent),function(){t.exposure_urls instanceof window.Array&&a.each(t.exposure_urls,function(n,e){e.exposureUrl instanceof window.Array&&"number"==typeof e.timeMillis&&window.setTimeout(function(){a.each(e.exposureUrl,function(n,e){a.get(e)})},1e3*e.timeMillis)})}()),r(e.advertId,e.agencyType,e.pce,e.tag,e.ref,t.rtbAdId),e.params=p,e.sendClickLog=function(){c(e.advertId,e.agencyType,e.pce,e.tag,e.ref,t.rtbAdId,t.dspId,t.cookieMapping,t.type)};var o,i=n.advertLoad;for(o=0;o<i.length;o++)i[o](e)}}})},c=function(n){a.ajax({url:"http://e.changyan.sohu.com/dataService/getConfig",data:{appId:t},dataType:"jsonp",success:function(a){0===a.code&&"function"==typeof n&&n(a)}})};c(function(n){if(n){if(n.disabledChannels&&n.disabledChannels.length){var a=!0;if(function(){var e;for(e=0;e<n.disabledChannels.length;e++)n.disabledChannels[e]===o&&(a=!1)}(),a===!1)return}n.positions&&n.positions.length&&!function(){var a,t;for(a=0;a<n.positions.length;a++)t=parseInt(n.positions[a],10),"wap"===e&&5e3>t||"pc"===e&&t>5e3||("pc"!==e||1530!==t||document.getElementById("SOHUCS"))&&r(t)}()}})},e=function(n){if(window.XMLHttpRequest){var e=n.type,t=n.appId,o="null",i=window.document.title,d=window.location.href;"pc"!==e&&"wap"!==e&&(e="pc"),n.hasOwnProperty("categoryId")&&void 0!==n.categoryId&&(o=n.categoryId),n.hasOwnProperty("title")&&(i=n.title),n.hasOwnProperty("url")&&(d=n.url),a(window.changyanjQuery||window.cyanZepto||window.jQuery,e,t,o,i,d)}};e.on=function(a,e){n[a]&&"function"==typeof e&&n[a].push(e)},"function"!=typeof window.changyanDSP&&(window.changyanDSP=e)}();