<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>不同方向的出现直线</title>
<meta name="description" content="">
<meta name="keywords" content="">
<link href="" rel="stylesheet">
</head>
<body style="background:#000">
    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="400" height="400" style="background: #fff;">
    <g style="cursor:pointer">
	 <line x1="20" y1="200" x2="380" y2="200" stroke-dasharray="360" stroke-dashoffset="360" style="stroke: #000;stroke-width: 4;"/>
	 <circle cx="20" cy="200" r="10"  />
	 <circle cx="380" cy="200" r="10" style="fill:#f00" />
	 </g>
</svg>
<script type="text/javascript">
	var $oLine = document.querySelector('line'),lengthOfLine = 360,timer1=null,timer2=null,
		$circles = document.querySelectorAll('circle');
		//console.log( $circles )
		
		function fn1(fn){ 
			$circles[0].setAttribute('r',15);
			$circles[1].setAttribute('r',10);
			$oLine.setAttribute('stroke-dasharray','360');
			$oLine.setAttribute('stroke-dashoffset','360');
			clearInterval(timer1);
			clearInterval(timer2);
			var i = 0,nowOffset;
			timer1 = setInterval(function(){
				
				nowOffset = lengthOfLine - (i+=1);
				if( nowOffset<0 ){ clearTimeout(timer1);$circles[0].setAttribute('r',10);$circles[1].setAttribute('r',15);$oLine.style.stroke = '#f00';fn&&fn(); };
				$oLine.setAttribute('stroke-dashoffset',nowOffset );

			},2);
		 };
		function fn2(fn){ 
			$circles[1].setAttribute('r',15);
			$circles[0].setAttribute('r',10);
			$oLine.setAttribute('stroke-dasharray','360');
			$oLine.setAttribute('stroke-dashoffset','360');
			clearInterval(timer2);
			clearInterval(timer1);
			var i = 0,nowOffset;
			timer2 = setInterval(function(){
				
				nowOffset = lengthOfLine + (i+=1);
				if( nowOffset>lengthOfLine*2 ){ clearTimeout(timer2);$circles[1].setAttribute('r',10);$circles[0].setAttribute('r',15);$oLine.style.stroke = '#000';fn&&fn(); };
				$oLine.setAttribute('stroke-dashoffset',nowOffset );

			},2);
		 };

	   function start(){
	   	fn1( function(){
	   		fn2(start);
	   	})
	   };
	   start();
</script>
</body>
</html>